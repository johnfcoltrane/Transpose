<html>
<script>
var tbl= [
	['C','C'],
	['C#','Db'],
	['D','D'],
	['D#','Eb'],
	['E','E'],
	['F','F'],
	['F#','Gb'],
	['G','G'],
	['G#','Ab'],
	['A','A'],
	['A#','Bb'],
	['B','B']];

function inc(x) {
	for(var i=0; i<tbl.length; i++) {
		if (tbl[i][0] == x || tbl[i][1] == x) {
			return tbl[(i+1)%12];
		}
	}
	return "";
}

function scan(x) {
	//alert(length(x));
	var buf = "";
	for(var i=0; i<x.length; i++) {
		//alert(x.length);
		var c  = x.substring(i, i+1);
		var c1 = x.substring(i+1, i+2);
		var a;
		if (c>='A' && c<='G') {
			if (c1 == '#' || c1 == 'b') {
				a = c + c1;
				i++;
			}
			else {
				a = c;
			}
			//alert("a="+a);
			c = inc(a)[1];
			//c = a;
		}
		//document.write("== "+c+"<br>");
		buf += c;
	}
	return(buf);
}

function test1() {
	var x1 = document.getElementById('txt2').value;
	alert(inc(x1));
}

function _transpose() {
	//alert(1);
	//var x = document.getElementById('txt1');
	var x1 = document.getElementById('txt2').value;
	alert(inc(x1)[0]);
}

function transpose() {
	//var x1 = document.getElementById('txt2').value;
	//var x2 = document.getElementById('txt3').value;
	//alert('scan');
	var x = scan(document.getElementById('txt1').value);
	alert(x);
	//return x;
}

</script>


<textarea id=txt1 width=80 height=80 length=80 
style="margin: 0px; width: 618px; height: 435px;"
_onclick='f1()'>

| Dm7 G7  | Em7 A7  | D7 Db7 | C |

</textarea>
<br>
<input type=button name=btn1 value="transpose" onclick="transpose()">
<br>
<input type=button name=btn2 value="inc" onclick="test1()">
<br>
<input type=text id=txt2>
<input type=text id=txt3>
<input type=button name=btn3 value="test2()" onclick="test2()">
</html>
